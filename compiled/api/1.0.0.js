// Generated by CoffeeScript 1.7.1
this.Traitify = new (function() {
  this.host = "https://api.traitify.com";
  this.version = "v1";
  this.setHost = function(host) {
    host = host.replace("http://", "").replace("https://", "");
    host = "https://" + host;
    this.host = host;
    return this;
  };
  this.setPublicKey = function(key) {
    this.publicKey = key;
    return this;
  };
  this.setVersion = function(version) {
    this.version = version;
    return this;
  };
  this.ajax = function(url, method, callback, params) {
    var xhr;
    url = "" + this.host + "/" + this.version + url;
    xhr = new XMLHttpRequest();
    if ("withCredentials" in xhr) {
      xhr.open(method, url, true);
    } else if (typeof XDomainRequest !== "undefined") {
      xhr = new XDomainRequest();
      xhr.open(method, url);
    } else {
      alert("Whoops, there was an error making the request.");
      xhr = null;
    }
    xhr;
    xhr.open(method, url, true);
    xhr.setRequestHeader("Authorization", "Basic " + btoa(this.publicKey + ":x"));
    xhr.setRequestHeader("Content-type", "application/json");
    xhr.setRequestHeader("Accept", "application/json");
    xhr.onload = function() {
      var data;
      data = JSON.parse(xhr.response);
      callback(data);
      return false;
    };
    xhr.send(params);
    xhr;
    return this;
  };
  this.put = function(url, params, callback) {
    this.ajax(url, "PUT", callback, params);
    return this;
  };
  this.get = function(url, callback) {
    this.ajax(url, "GET", callback, "");
    return this;
  };
  this.getDecks = function(callBack) {
    this.get("/decks", function(data) {
      return callBack(data);
    });
    return this;
  };
  this.getSlides = function(id, callBack) {
    this.get("/assessments/" + id + "/slides", function(data) {
      return callBack(data);
    });
    return this;
  };
  this.addSlide = function(assessmentId, slideId, value, timeTaken, callBack) {
    this.put("/assessments/" + assessmentId + "/slides/" + slideId, JSON.stringify({
      "response": value,
      "time_taken": timeTaken
    }), function(data) {
      return callBack(data);
    });
    return this;
  };
  this.addSlides = function(assessmentId, values, callBack) {
    this.put("/assessments/" + assessmentId + "/slides", JSON.stringify(values), function(data) {
      return callBack(data);
    });
    return this;
  };
  this.getPersonalityTypes = function(id, callBack) {
    this.get("/assessments/" + id + "/personality_types", function(data) {
      return callBack(data);
    });
    return this;
  };
  this.getPersonalityTraits = function(id, callBack) {
    this.get("/assessments/" + id + "/personality_traits", function(data) {
      return callBack(data);
    });
    return this;
  };
  this.getPersonalityTypesTraits = function(assessmentId, personalityTypeId, callBack) {
    this.get("/assessments/" + assessmentId + "/personality_types/" + personalityTypeId + "/personality_traits", function(data) {
      return callBack(data);
    });
    return this;
  };
  this.ui = Object();
  return this;
})();
